
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>FrankensteinVault333</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="vault">
  <div id="terminalOverlay">Initializing Vault Resurrection...</div>
  <div class="resurrection-container">
    <h1 class="glow">âš¡ Frankenstein Vault Resurrection 333 âš¡</h1>
    <p class="pulse">Bass Surge Incoming...</p>
    <img src="https://upload.wikimedia.org/wikipedia/commons/9/99/Frankenstein_Dracula.jpg" alt="Frankenstein" class="frank-img" />
    <audio id="bassDrop" autoplay loop>
      <source src="https://frankenstein333.33.amazonaws.com/resurrect_bass.mp3" type="audio/mp3" />
    </audio>
    <button onclick="resurrect()">âš¡ Ignite Vault âš¡</button>
    <button id="connectWallet">ðŸ”Œ Connect Wallet</button>
    <button id="connectCoinbase" style="background-color: #1652f0; color: white;">ðŸ”µ Coinbase Wallet</button>
    <button id="paymentBtn" style="background-color: #6772e5; color: white; font-size: 1.2rem; padding: 15px 25px;">ðŸ’³ Pay $33.33 & Mint Relic</button>
    <button onclick="testStripeConnection()" style="background-color: #28a745; color: white; margin-top: 10px;">ðŸ§ª Test Stripe Connection</button>
    <button onclick="testAllConnections()" style="background-color: #17a2b8; color: white; margin-top: 10px;">ðŸ”„ Test All Connections</button>
    <div id="mintStatus">ðŸ”’ Connect wallet, then complete Stripe payment to mint vault relic</div>
    <div style="margin-top: 15px; font-size: 0.9rem; color: #ffaa00;">
      ðŸ’¡ Connect Wallet (MetaMask/Coinbase) â†’ Complete Stripe Payment â†’ Relic Mints to Vault
    </div>
    <div style="margin-top: 10px; font-size: 0.8rem; color: #888;">
      ðŸ”Œ No wallet? Install: <a href="https://metamask.io" target="_blank" style="color: #ff6600;">MetaMask</a> | <a href="https://wallet.coinbase.com" target="_blank" style="color: #1652f0;">Coinbase Wallet</a>
    </div>
  </div>
  
  <script src="https://js.stripe.com/v3/"></script>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script src="script.js"></script>

<script>
  async function mintRelic() {
    if (!window.ethereum) {
      alert("MetaMask not detected. Please install MetaMask.");
      return;
    }

    await window.ethereum.request({ method: 'eth_requestAccounts' });

    const provider = new ethers.providers.Web3Provider(window.ethereum);
    const signer = provider.getSigner();

    const contractAddress = "YOUR_DEPLOYED_CONTRACT_ADDRESS";
    const abi = [/* paste your ABI here */];

    const contract = new ethers.Contract(contractAddress, abi, signer);
    const tx = await contract.mintRelic(); // or whatever your function is
    await tx.wait();

    alert("ðŸŽ‰ Relic minted successfully!");
  }

  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get("success") === "true") {
    mintRelic(); // Automatically mint after payment
  }
</script>
</body>
</html>

<button id="checkout">Mint ChaosKey Relic</button>

<script>
  const stripe = Stripe("pk_live_XXXXXXXXXXXXXXXXXXXXXXXX");

  document.getElementById("checkout").addEventListener("click", async () => {
    const res = await fetch("/create-checkout-session", { method: "POST" });
    const session = await res.json();
    await stripe.redirectToCheckout({ sessionId: session.id });
  });
</script>

