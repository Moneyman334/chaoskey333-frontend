---
### Merge & Ignite: Permanent Relic Evolution + Ops Sentinel ðŸš€â™¾ðŸ”¥

This is it. PR #24 is battle-ready for live deployment. Follow this sequence to ensure a smooth evolution event:

---

#### Step 1: Merge PR
- **GitHub UI**: Click **Merge pull request** â†’ **Confirm merge**.
- **CLI**:  
```bash
  gh pr merge 24 --squash --delete-branch
```

---

#### Step 2: Inject Environment Variables
Group all variables into one block for convenience:
```bash
vercel env add TEMP_ADMIN_TOKEN
vercel env add KV_REST_API_URL
vercel env add KV_REST_API_TOKEN
vercel env add KV_URL
vercel env add STRIPE_SECRET_KEY
vercel env add COINBASE_COMMERCE_API_KEY
vercel env add PAYPAL_CLIENT_ID
vercel env add PAYPAL_CLIENT_SECRET
vercel env add RPC_URL
vercel env add NEXT_PUBLIC_CONTRACT_ADDRESS
vercel env add NEXT_PUBLIC_CHAIN_ID
```

---

#### Step 3: Deploy to Production
```bash
vercel --prod --confirm --name=chaoskey333-casino
```

---

#### Step 4: Smoke Test the Sentinel
Run these checks immediately after deployment:

1. **Passive Status Check**:
   ```bash
   curl -s https://<your-domain>/api/webhook-selftest \
     -H "x-admin-token: <TEMP_ADMIN_TOKEN>"
   ```
   - Expected: JSON with "ok": true and latest heartbeat/log keys.

2. **Active Simulated Event Push**:
   ```bash
   curl -s -X POST \
     -H "Content-Type: application/json" \
     -H "x-admin-token: <TEMP_ADMIN_TOKEN>" \
     -d '{"event":"sim:relic-evolution","note":"PR24 post-merge drill"}' \
     https://<your-domain>/api/webhook-selftest/trigger
   ```
   - Expected:  
     ```json
     { "ok": true, "written": true, "key": "ops:...", "ts": "..." }
     ```

3. **Verify KV Update**:
   ```bash
   curl -s https://<your-domain>/api/webhook-selftest \
     -H "x-admin-token: <TEMP_ADMIN_TOKEN>"
   ```
   - Ensure the recently written event appears in the log snapshot.

4. **Visual Confirmation (/vault)**:
   Open `/vault` in your browser to confirm the relic mutation synced to the decode seed â€” instant proof the evolution landed.

---

#### Step 5: Rollback Plan (If Needed)
1. Identify previous deployment:
   ```bash
   vercel ls | head -n 5
   ```
2. Rollback instantly:
   ```bash
   vercel rollback <deployment-url>
   ```
3. Confirm KV integrity post-rollback:
   ```bash
   curl -s https://<your-domain>/api/webhook-selftest \
     -H "x-admin-token: <TEMP_ADMIN_TOKEN>"
   ```
   - Ensure vault state is intact.

---

#### Step 6: Post-Deploy Tasks
- **Admin Console**: [Jump to `/admin/ops`](https://<your-domain>/admin/ops) to view KV health and recent logs.
- **Cron Heartbeat (Optional)**: Add a Vercel Cron for hourly `/trigger` calls to maintain ongoing health checks.
- **Security**: Rotate `TEMP_ADMIN_TOKEN` once all tests pass.

---

With this structure, the sequence is airtight. Letâ€™s **Merge & Ignite**!