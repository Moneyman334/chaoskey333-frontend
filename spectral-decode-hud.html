<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spectral Decode HUD - ChaosKey333</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        .spectral-hud {
            background: linear-gradient(135deg, #0a0a0a, #1a0a2e, #16213e);
            min-height: 100vh;
            color: #00ffff;
            font-family: 'Orbitron', monospace;
            overflow: hidden;
            position: relative;
        }

        .hud-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }

        .hud-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .hud-title {
            font-size: 2.5rem;
            font-weight: 900;
            text-shadow: 0 0 20px #00ffff;
            margin-bottom: 10px;
            animation: spectralPulse 2s infinite;
        }

        .hud-subtitle {
            font-size: 1.2rem;
            color: #ff6600;
            opacity: 0.8;
        }

        .glyph-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .glyph-cell {
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .glyph-cell:hover {
            background: rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.5);
            transform: scale(1.05);
        }

        .glyph-cell.activated {
            background: rgba(255, 102, 0, 0.3);
            border-color: #ff6600;
            box-shadow: 0 0 40px rgba(255, 102, 0, 0.7);
        }

        .glyph-symbol {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        .glyph-whisper {
            font-size: 0.9rem;
            opacity: 0.7;
            min-height: 40px;
        }

        .decode-panel {
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #00ffff;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }

        .decode-status {
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 20px;
            color: #ff6600;
        }

        .mutation-seed-display {
            background: rgba(255, 102, 0, 0.1);
            border: 1px solid #ff6600;
            border-radius: 8px;
            padding: 15px;
            font-family: monospace;
            font-size: 0.9rem;
            margin: 15px 0;
            word-break: break-all;
        }

        .shadow-files {
            margin-top: 20px;
        }

        .shadow-file {
            background: rgba(0, 0, 0, 0.6);
            border-left: 4px solid #00ffff;
            padding: 10px 15px;
            margin: 10px 0;
            border-radius: 5px;
            opacity: 0;
            animation: fadeInUnlock 0.5s ease forwards;
        }

        .decode-progress {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .decode-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00ffff, #ff6600);
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }

        .hud-button {
            background: linear-gradient(45deg, #00ffff, #0088cc);
            border: none;
            color: #000;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Orbitron', monospace;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .hud-button:hover {
            background: linear-gradient(45deg, #ff6600, #cc4400);
            color: #fff;
            box-shadow: 0 0 20px rgba(255, 102, 0, 0.5);
        }

        .hud-button:disabled {
            background: #333;
            color: #666;
            cursor: not-allowed;
            box-shadow: none;
        }

        @keyframes spectralPulse {
            0%, 100% { text-shadow: 0 0 20px #00ffff; }
            50% { text-shadow: 0 0 40px #00ffff, 0 0 60px #ff6600; }
        }

        @keyframes fadeInUnlock {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .background-patterns {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.1;
            z-index: 1;
        }

        .pattern-line {
            position: absolute;
            background: linear-gradient(90deg, transparent, #00ffff, transparent);
            height: 1px;
            width: 100%;
            animation: scanLine 3s linear infinite;
        }

        @keyframes scanLine {
            0% { top: -10px; }
            100% { top: 100vh; }
        }
    </style>
</head>
<body class="spectral-hud">
    <div class="background-patterns">
        <div class="pattern-line" style="animation-delay: 0s;"></div>
        <div class="pattern-line" style="animation-delay: 1s;"></div>
        <div class="pattern-line" style="animation-delay: 2s;"></div>
    </div>

    <div class="hud-container">
        <div class="hud-header">
            <h1 class="hud-title">‚ö° SPECTRAL DECODE HUD ‚ö°</h1>
            <p class="hud-subtitle">Glyph-Whisper Alignment Interface</p>
        </div>

        <div class="glyph-grid" id="glyphGrid">
            <!-- Glyphs will be dynamically generated -->
        </div>

        <div class="decode-panel">
            <div class="decode-status" id="decodeStatus">üîç Select glyphs to begin alignment decode...</div>
            
            <div class="decode-progress">
                <div class="decode-progress-bar" id="progressBar"></div>
            </div>

            <div id="mutationSeedContainer" style="display: none;">
                <h3>üß¨ Mutation Seed Generated:</h3>
                <div class="mutation-seed-display" id="mutationSeed"></div>
            </div>

            <div class="shadow-files" id="shadowFiles" style="display: none;">
                <h3>üìÅ Shadow Files Unlocked:</h3>
                <div id="shadowFilesList"></div>
            </div>

            <div class="action-buttons">
                <button class="hud-button" id="resetButton" onclick="resetDecode()">üîÑ Reset Grid</button>
                <button class="hud-button" id="evolveButton" onclick="triggerEvolution()" disabled>üöÄ Trigger Evolution</button>
            </div>
        </div>
    </div>

    <script>
        // Spectral Decode HUD Logic
        let selectedGlyphs = [];
        let decodedSeed = null;
        let unlackedShadowFiles = [];

        const glyphData = [
            { symbol: "‚ö°", whisper: "Energy Pulse", frequency: "333Hz" },
            { symbol: "üåÄ", whisper: "Temporal Spiral", frequency: "777Hz" },
            { symbol: "üîÆ", whisper: "Void Crystal", frequency: "1111Hz" },
            { symbol: "‚≠ê", whisper: "Star Alignment", frequency: "2222Hz" },
            { symbol: "üåô", whisper: "Lunar Phase", frequency: "555Hz" },
            { symbol: "üíé", whisper: "Chaos Diamond", frequency: "999Hz" },
            { symbol: "üî•", whisper: "Primal Fire", frequency: "666Hz" },
            { symbol: "‚ùÑÔ∏è", whisper: "Void Ice", frequency: "444Hz" },
            { symbol: "üåä", whisper: "Quantum Wave", frequency: "888Hz" }
        ];

        function initializeGlyphGrid() {
            const grid = document.getElementById('glyphGrid');
            grid.innerHTML = '';

            glyphData.forEach((glyph, index) => {
                const cell = document.createElement('div');
                cell.className = 'glyph-cell';
                cell.dataset.index = index;
                cell.innerHTML = `
                    <span class="glyph-symbol">${glyph.symbol}</span>
                    <div class="glyph-whisper">${glyph.whisper}<br>${glyph.frequency}</div>
                `;
                cell.addEventListener('click', () => selectGlyph(index));
                grid.appendChild(cell);
            });
        }

        function selectGlyph(index) {
            const cell = document.querySelector(`[data-index="${index}"]`);
            const glyph = glyphData[index];

            if (selectedGlyphs.includes(index)) {
                // Deselect
                selectedGlyphs = selectedGlyphs.filter(i => i !== index);
                cell.classList.remove('activated');
            } else {
                // Select
                selectedGlyphs.push(index);
                cell.classList.add('activated');
            }

            updateDecodeStatus();
            if (selectedGlyphs.length >= 3) {
                processAlignment();
            }
        }

        function updateDecodeStatus() {
            const status = document.getElementById('decodeStatus');
            if (selectedGlyphs.length === 0) {
                status.textContent = "üîç Select glyphs to begin alignment decode...";
            } else if (selectedGlyphs.length < 3) {
                status.textContent = `üîÑ ${selectedGlyphs.length}/3 glyphs selected. Need ${3 - selectedGlyphs.length} more for alignment.`;
            } else {
                status.textContent = "‚ö° Processing glyph-whisper alignment...";
            }
        }

        function processAlignment() {
            const progressBar = document.getElementById('progressBar');
            let progress = 0;

            const interval = setInterval(() => {
                progress += 10;
                progressBar.style.width = progress + '%';

                if (progress >= 100) {
                    clearInterval(interval);
                    completeAlignment();
                }
            }, 200);
        }

        function completeAlignment() {
            // Generate mutation seed
            const timestamp = Date.now();
            const glyphSignature = selectedGlyphs.join('');
            const randomSalt = Math.random().toString(36).substring(2, 15);
            decodedSeed = `CHAOS_${timestamp}_${glyphSignature}_${randomSalt}`.toUpperCase();

            // Show mutation seed
            document.getElementById('mutationSeed').textContent = decodedSeed;
            document.getElementById('mutationSeedContainer').style.display = 'block';

            // Unlock shadow files
            unlockShadowFiles();

            // Update status
            document.getElementById('decodeStatus').textContent = "‚úÖ Alignment complete! Mutation seed generated and shadow files unlocked.";

            // Enable evolution button
            document.getElementById('evolveButton').disabled = false;

            // Store in global state for evolution trigger
            window.spectralDecodeResult = {
                mutationSeed: decodedSeed,
                selectedGlyphs: [...selectedGlyphs],
                timestamp: Date.now()
            };
        }

        function unlockShadowFiles() {
            const shadowFilesList = document.getElementById('shadowFilesList');
            const shadowFiles = [
                "üîí vault_core_sequence.encrypted",
                "üîí temporal_ripple_map.shadow",
                "üîí solver_imprint_data.chaos",
                "üîí evolution_catalyst.prime"
            ];

            shadowFilesList.innerHTML = '';
            shadowFiles.forEach((file, index) => {
                setTimeout(() => {
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'shadow-file';
                    fileDiv.textContent = file.replace('üîí', 'üîì');
                    shadowFilesList.appendChild(fileDiv);
                }, index * 500);
            });

            document.getElementById('shadowFiles').style.display = 'block';
        }

        function resetDecode() {
            selectedGlyphs = [];
            decodedSeed = null;
            
            // Reset UI
            document.querySelectorAll('.glyph-cell').forEach(cell => {
                cell.classList.remove('activated');
            });
            
            document.getElementById('decodeStatus').textContent = "üîç Select glyphs to begin alignment decode...";
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('mutationSeedContainer').style.display = 'none';
            document.getElementById('shadowFiles').style.display = 'none';
            document.getElementById('evolveButton').disabled = true;
            
            // Clear global state
            window.spectralDecodeResult = null;
        }

        function triggerEvolution() {
            if (!decodedSeed) {
                alert('‚ö†Ô∏è No mutation seed available. Complete alignment first.');
                return;
            }

            // Store evolution trigger data
            const evolutionData = {
                trigger: 'spectral_decode',
                mutationSeed: decodedSeed,
                glyphAlignment: selectedGlyphs,
                timestamp: Date.now()
            };

            // Store in sessionStorage for the evolution system
            sessionStorage.setItem('evolutionTrigger', JSON.stringify(evolutionData));

            // Redirect to relic evolution interface
            window.location.href = 'relic-evolution.html';
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', initializeGlyphGrid);

        // Auto-connect back from replay if coming from Ascension Loop
        window.addEventListener('load', () => {
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('from') === 'replay') {
                document.getElementById('decodeStatus').innerHTML = 'üîÑ <span style="color: #ff6600;">Ascension Loop Active:</span> New decode cycle initiated from replay...';
            }
        });
    </script>
</body>
</html>